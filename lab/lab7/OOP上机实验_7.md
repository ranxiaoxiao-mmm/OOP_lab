## <center>OOP上机实验(7)</center>
**<center>(Version: 0.77  Date: 2025/05/21  Author: wangxp@fudan.edu.cn) </center>**


### 1 实验目标
* 使用AI工具（包括deep-seek,豆包,coze,grok,claude,gemma）完成项目的设计、编码、测试、运行；
* 使用面向对象的设计[1]方法：需要识别类、类之间的关系、绘制用例、状态图等；
* 在设计时需要使用SOLID原则[2]，不要把所有的代码放在一个类中，或放在一个函数中，这样一定是一个糟糕的设计。

### 2 实验内容
**通过模仿linux下<font color='red'>cal命令</font>的功能，体会面向对象程序设计**。实际上面向对象的程序设计包括：
- 设计
    - 识别类（画出类图）；
    - 识别关系（画出类之间的关系图）；
    - 画出用例（完成的功能：例如cal完成的功能包括A）完成参数解析；B）根据参数生成相应的月历；C）输出月历，其中B和C这两个用例可以混在一起）；
    - 画出状态图（详细描述代码的执行过程）；
- 编码
    - 编写用户代码；
    - 编写详细类；
- 测试
    - 单元测试：测试每个类、每个独立的函数；
    - 集成测试：把几个类合在一起，测试其完成的功能。

如果后期测试有问题，则需要回溯到前一个过程（编码）、或更前一个阶段(设计)。通常，如果测试出现的问题需要回溯到设计阶段，这意味着前期的设计有缺陷。

#### 2.1 使用cal软件
可以在wsl中，使用cal命令；或者使用在线的linux环境(例如<font color=red> idx.google.com中的Android Studio Cloud</font>, 等)，使用cal命令。

#### 2.2 需要实现的cal功能
cal命令包含众多的参数，需要实现的参数包括
- \-A months 指定月份之后的月份数（不含当前月份），默认为0；
- \-B months 指定月份之前的月份数（不含当前月份），默认为0；
- \-d yyyy-mm 指定的月份，默认为当月；
- \-r rownum 指定每一横排显示几个月，默认为3个月；
- \-m month  指定月份，默认为当月；
- yyyy       指定年份，默认为当年。如果只指定了年份，默认显示当年所有月份的日期；

例如，下面给出了一些示例的命令及含义(当日月份为2025年5月)
- **cal 2025**      :显示2025年的日历，每行显示3个月
- **cal -r 4 2025** :显示2025年的日历，每行显示4个月
- **cal -m 5**      :显示2025年5月的日历，只显示1个月
- **cal -A 2**      :显示2025年5、6、7共3个月的日历，显示在一排上；
- **cal -B 2**      :显示2025年3、4、5共3个月的日历，显示在一排上；

#### 2.3 提交要求
提交内容的包括：
- CMakeLists.txt文件，放在顶层目录中；
- readme.md，对于设计的说明，里面的内容包括
    - 类图(至少包含两个类，选项类和月历类)
    - 类关系图
    - 用例图
    - 对于AI所做的设计，提出批评性意见（如果有，则写上；如果没有，则不写）。
- 源代码
    - 把所有的源代码放在src目录下；
    - 把所有的测试代码放在test目录下。

#### 2.4 难点
项目的难点包括三个部分
- 命令参数的解析。不好的设计，会使得命令参数的解析又难看又长，请仔细设计命令参数解析类；
- 输出单个月历。即指定年和月，生成当月的月历。这个月历的第一行通常应该是"May 2025"（如果显示当前月）；第2行是"Su Mo Tu We Th Fr Sa"，第3-8行显示每周的日期。
- 显示多个月时，如何把多个月"相加"之后"输出"？

#### 2.5 提示
可以使用第3方库
- fmt[3]: 进行格式化，这样可以很容易按要求拼接、对齐字符串。

### 3 参考资料
[1] OOD。https://zh.wikipedia.org/wiki/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1
[2] SOLID. https://de.wikipedia.org/wiki/Solid
[3] fmt. https://github.com/fmtlib/fmt